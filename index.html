<!DOCTYPE html>
<html lang="en" class="show">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="color-scheme" content="light dark">
		<link rel="stylesheet" href="style.css">
		<title>Slideshow</title>
	</head>
	<body>
		<main>
			<div id="title" class="title centerblock center mgn">
				<h1>why not both? ðŸ¤”</h1>
				<p class="hide balance">Or, why building both dark and light schemes together is easy, actually.</p>
				<p class="hide balance">And, adding low and high contrast themes is easy too ^_^</p>
			</div>

			<div id="intro" class="red">
				<h2>hello! ðŸ‘‹</h2>
				<div>
					<img src="images/cartoon.png" alt="a cartoon avatar of me by Andy Carolan">
					<p>Sara Joy here. <span class="hide">I'm both:</span></p>
					<ul>
						<li class="hide"> an old hand ðŸ‘Œ
						<br><i>(built websites as a teen from 1999)</i></li>
						<li class="hide"> and a newbie ðŸ¤¯
						<br><i>(switched career from small-company general engineering into web dev in 2022)</i></li>
					</ul>
				</div>
			</div>

			<div class="pch">
				<h2>dark mode vs. light mode</h2>
				<div>
					<p>We all love a good polarising argument!</p>
					<p class="hide">But there are valid reasons to prefer one over the other.</p>
					<p class="hide balance">Also, you're allowed to just like light or dark websites better, for no good reason!</p>
					<p class="hide">Your eyes, your choice! <span id="7" class="hide">ðŸ‘€</span></p>
				</div>
			</div>

			<div class="orn">
				<h2>why dark mode?</h2>
				<div>
					<p>Feelings of eye strain, floaters, preference</p>
				</div>
			</div>

			<div class="ylw">
				<h2>why light mode?</h2>
				<div>
					<p>Astigmatism, eye strain, easier to focus (smaller pupil)</p>
				</div>
			</div>

			<div class="lim">
				<h2>why not both?</h2>
				<div>
					<p>GOOD QUESTION</p>
				</div>
			</div>

			<div class="grn">
				<h2>this talk's scope</h2>
				<div>
					<p>not got time to discuss toggles - all about preference from OS</p>
				</div>
			</div>

			<div class="tqs">
				<h2>starting from scratch</h2>
				<div>
					<p>no styles, no problem</p>
				</div>
			</div>

			<div class="sky">
				<h2>default HTML themes</h2>
				<div>
					<p>dark and light</p>
				</div>
			</div>

			<div class="blu">
				<h2>color-scheme</h2>
				<div>
					<p>meta tag in head</p>
				</div>
			</div>

			<div>
				<iframe scrolling="no" title="11tyConf 1" src="https://codepen.io/sarajw/embed/LYvgxaZ?default-tab=html%2Cresult&editable=true" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
					See the Pen <a href="https://codepen.io/sarajw/pen/LYvgxaZ">
					11tyConf 1</a> by Sara (<a href="https://codepen.io/sarajw">@sarajw</a>)
					on <a href="https://codepen.io">CodePen</a>.
				</iframe>
			</div>

			<div class="nav">
				<h2>system colors</h2>
				<div>
					<p>canvas, canvastext, others</p>
				</div>
			</div>

			<div class="prp">
				<h2>contrast too high?</h2>
				<div>
					<p>allow for prefers-contrast</p>
				</div>
			</div>

			<div class="mgn">
				<h2>other colours</h2>
				<div>
					<p>color-mix, relative colors, filtering</p>
				</div>
			</div>

			<div class="red">
				<h2>prefers-color-scheme</h2>
				<div>
					<p>use this alongside color-scheme</p>
				</div>
			</div>

			<div class="pch">
				<h2>light-dark()</h2>
				<div>
					<p>even easier!</p>
				</div>
			</div>

			<div class="orn">
				<h2>takeaway - offer choice</h2>
				<div>
					<p>two toggles, done! [make a nice grid]</p>
				</div>
			</div>
		</main>
		<button id="show" onClick="slideshowToggle()">Toggle Slideshow</button>
		<button id="mode" onClick="modeSwitcher()">Auto Mode</button>
		<script>
		function modeSwitcher() {
			const mode = document.querySelector('meta[name="color-scheme"]');
			const button = document.getElementById("mode");
			if (mode.getAttribute("content") === "light dark") {
				mode.setAttribute("content", "light");
				button.innerText = "Light Mode";
				return;
			}
			if (mode.getAttribute("content") === "light") {
				mode.setAttribute("content", "dark");
				button.innerText = "Dark Mode";
				return;
			}
			if (mode.getAttribute("content") === "dark") {
				mode.setAttribute("content", "light dark");
				button.innerText = "Auto Mode";
				return;
			}
		}

		function slideshowToggle() {
			document.querySelector("html").classList.toggle("show");
		}

		const observer = new IntersectionObserver(revelations => {
			revelations.forEach(revelation => {
				if(revelation.isIntersecting) {
					revelation.target.classList.add("in-viewport");
				} else {
					revelation.target.classList.remove("in-viewport");
				}
			})
		}, { threshold: 1 })

		let reveal = 0;
		const hiddenElements = document.querySelectorAll(".hide, .reveal");
		for (const element of hiddenElements) {
			observer.observe(element)
		}
		let hiddenElementsInVP = document.querySelectorAll(".in-viewport");

		document.addEventListener("keyup", (event) => {
			setTimeout( () => {

			if (event.key === "ArrowDown" || event.key === "ArrowUp") {
				for (const element of hiddenElements) {
					observer.observe(element)
				}
			
				hiddenElementsInVP = document.querySelectorAll(".in-viewport");
				console.log(hiddenElementsInVP);

				if (event.key === "ArrowDown") {
					for (const element of hiddenElementsInVP) {
						element.classList.remove("reveal");
						element.classList.add("hide");
					}
					reveal = 0;
				} 
				if (event.key === "ArrowUp") {
					for (const element of hiddenElementsInVP) {
						element.classList.remove("hide");
						element.classList.add("reveal");
					}
					reveal = hiddenElementsInVP.length - 1;
				} 
			}
		}, 250);

			const element = hiddenElementsInVP[reveal];
			if(!element) return;

			if (event.key === "ArrowRight") {
				element.classList.remove("hide");
				element.classList.add("reveal");
				reveal++;
			}
			if (event.key === "ArrowLeft") {
				element.classList.remove("reveal");
				element.classList.add("hide");
				reveal--;
			}
			if (reveal < 0) reveal = 0;
			if (reveal > hiddenElementsInVP.length - 1) reveal = hiddenElementsInVP.length - 1;
			console.log(reveal)
		});

		</script>
	</body>
</html>