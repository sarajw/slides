<!DOCTYPE html>
<html lang="en" class="show">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="color-scheme" content="light dark">
		<link rel="stylesheet" href="style.css">
		<title>Slideshow</title>
	</head>
	<body>
		<main class="rainbow">
			<article id="title" class="title centerblock center mgn">
				<h1>why not both? ðŸ¤”</h1>
				<p class="hide balance">Or, why building both dark and light schemes together is easy, actually.</p>
				<p class="hide balance">And, adding low and high contrast themes is easy too ^_^</p>
			</article>

			<article id="intro">
				<h2>hello! ðŸ‘‹</h2>
				<div>
					<img width="200" src="images/cartoon.png" alt="a cartoon avatar of me by Andy Carolan">
					<p>Sara Joy here. <span class="hide">I'm both:</span></p>
					<ul>
						<li class="hide"> an old hand ðŸ‘Œ
						<br><i>(built websites as a teen from 1999)</i></li>
						<li class="hide"> and a newbie ðŸ¤¯
						<br><i>(switched career from small-company general engineering into web dev in 2022)</i></li>
					</ul>
				</div>
			</article>

			<article id="warning">
				<h2>a warning</h2>
				<div>
					<p>There may be some abrupt changes between dark and light modes.</p>
					<p>If you suffer from migraines, epilepsy, or strong astigmatism - I'm so sorry!</p>
					<p>My hope is that with this information I'm about to present, the web will get more comfortable for you all.</p>
				</div>
			</article>

			<article id="versus">
				<h2>dark mode vs. light mode</h2>
				<div>
					<p>We all love a good polarising argument!</p>
					<p class="hide">But there are valid reasons to prefer one over the other.</p>
					<p class="hide balance">Also, you're allowed to just like light or dark websites better, for no good reason!</p>
					<p class="hide">Your eyes, your choice! <span id="7" class="hide">ðŸ‘€</span></p>
				</div>
			</article>

			<article id="ydark">
				<h2>why dark mode?</h2>
				<div>
					<p>Feelings of eye strain, floaters, preference</p>
				</div>
			</article>

			<article id="ylight">
				<h2>why light mode?</h2>
				<div>
					<p>Astigmatism, eye strain, easier to focus (smaller pupil)</p>
				</div>
			</article>

			<article id="both">
				<h2>why not both?</h2>
				<div>
					<p>GOOD QUESTION</p>
				</div>
			</article>

			<article id="scope">
				<h2>this talk's scope</h2>
				<div>
					<p>not got time to discuss toggles - all about preference from OS</p>
				</div>
			</article>

			<article id="scratch">
				<h2>starting from scratch</h2>
				<div>
					<p>no styles, no problem</p>
				</div>
			</article>

			<article id="themes">
				<h2>default HTML themes</h2>
				<div>
					<p>dark and light</p>
				</div>
			</article>

			<article id="scheme">
				<h2>color-scheme</h2>
				<div>
					<p>meta tag in head</p>
				</div>
			</article>

			<article id="scheme-demo">
				<iframe scrolling="no" title="11tyConf 1" src="https://codepen.io/sarajw/embed/LYvgxaZ?default-tab=html%2Cresult&editable=true" frameborder="no" allowtransparency="true" allowfullscreen="true"></iframe>
			</article>

			<article id="system">
				<h2>system colors</h2>
				<div>
					<p>canvas, canvastext, others</p>
				</div>
			</article>

			<article id="system-demo">
				<h2>system colors</h2>
				<div>
					<style contenteditable="true">.system-demo {
  color: Canvas;
  background-color: CanvasText;
}</style>
					<div class="system-demo">
						Hellooooooo!
					</div>
				</div>
			</article>

			<article id="contrast">
				<h2>contrast too high?</h2>
				<div>
					<p>allow for prefers-contrast</p>
				</div>
			</article>

			<article id="colors">
				<h2>other colours</h2>
				<div>
					<p>color-mix, relative colors, filtering</p>
				</div>
			</article>

			<article id="prefers">
				<h2>prefers-color-scheme</h2>
				<div>
					<p>use this alongside color-scheme</p>
				</div>
			</article>

			<article id="lightdark">
				<h2>light-dark()</h2>
				<div>
					<p>even easier!</p>
				</div>
			</article>

			<article id="choice">
				<h2>takeaway: offer choice</h2>
				<div>
					<p>two toggles, done! [make a nice grid]</p>
				</div>
			</article>

			<article id="further">
				<h2>further reading</h2>
				<div>
					<p>references and deeper dives</p>
				</div>
			</article>

		</main>

		<button id="show" onClick="slideshowToggle()">Slideshow</button>
		<button id="mode" onClick="modeSwitcher()">Auto Mode</button>

		<script>
		const mode = document.querySelector('meta[name="color-scheme"]');
		const button = document.getElementById("mode");
		function modeSwitcher() {
			if (mode.getAttribute("content") === "light dark") {
				mode.setAttribute("content", "light");
				button.innerText = "Light Mode";
				return;
			}
			if (mode.getAttribute("content") === "light") {
				mode.setAttribute("content", "dark");
				button.innerText = "Dark Mode";
				return;
			}
			if (mode.getAttribute("content") === "dark") {
				mode.setAttribute("content", "light dark");
				button.innerText = "Auto Mode";
				return;
			}
		}
		if(window.location.href.endsWith('light')) {
			mode.setAttribute("content", "light");
			button.innerText = "Light Mode";
		}
		if(window.location.href.endsWith('dark')) {
			mode.setAttribute("content", "dark");
			button.innerText = "Dark Mode";
		}

		function slideshowToggle() {
			document.querySelector("html").classList.toggle("show");
		}
		if(window.location.href.endsWith('doc')) document.querySelector("html").classList.remove("show");

		const observer = new IntersectionObserver(revelations => {
			revelations.forEach(revelation => {
				if(revelation.isIntersecting) {
					revelation.target.classList.add("in-viewport");
				} else {
					revelation.target.classList.remove("in-viewport");
				}
			})
		}, { threshold: 1 })

		let reveal = 0;
		const hiddenElements = document.querySelectorAll(".hide, .reveal");
		for (const element of hiddenElements) {
			observer.observe(element)
		}
		let hiddenElementsInVP = document.querySelectorAll(".in-viewport");

		document.addEventListener("keyup", (event) => {
			setTimeout( () => {
				if (event.key === "ArrowDown" || event.key === "ArrowUp") {
					for (const element of hiddenElements) {
						observer.observe(element)
					}
				
					hiddenElementsInVP = document.querySelectorAll(".in-viewport");
					// console.log(hiddenElementsInVP);

					if (event.key === "ArrowDown") {
						for (const element of hiddenElementsInVP) {
							element.classList.remove("reveal");
							element.classList.add("hide");
						}
						reveal = 0;
					} 
					if (event.key === "ArrowUp") {
						for (const element of hiddenElementsInVP) {
							element.classList.remove("hide");
							element.classList.add("reveal");
						}
						reveal = hiddenElementsInVP.length - 1;
					} 
				}
			}, 250);

			hiddenElementsInVP = document.querySelectorAll(".in-viewport");
			const element = hiddenElementsInVP[reveal];
			// console.log(hiddenElementsInVP)
			if(!element) return;

			if (event.key === "ArrowRight") {
				element.classList.remove("hide");
				element.classList.add("reveal");
				reveal++;
			}
			if (event.key === "ArrowLeft") {
				element.classList.remove("reveal");
				element.classList.add("hide");
				reveal--;
			}
			if (reveal < 0) reveal = 0;
			if (reveal > hiddenElementsInVP.length - 1) reveal = hiddenElementsInVP.length - 1;
			// console.log(reveal)
		});

		</script>
	</body>
</html>